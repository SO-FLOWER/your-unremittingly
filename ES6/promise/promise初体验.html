<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>初体验Promise</title>
  </head>
  <body>
    <h5>
      promise.then方法的链式调用，第一个回调函数是reslove成功的返回，第二个回调函数是reject失败的回调函数
    </h5>
    <button id="btn">点击抽奖</button>
    <script>
      function Nums(a, b) {
        return Math.ceil(Math.random() * (b - a));
      }
      const btn = document.querySelector("#btn");
      btn.addEventListener("click", function () {
        const randomNum = new Promise((reslove, reject) => {
          setTimeout(() => {
            if (Nums(1, 100) > 30) {
              reslove(Nums(1, 100));
            } else {
              reject(Nums(1, 100));
            }
          }, 2000);
        });
        randomNum.then(
          (res) => {
            alert("恭喜中奖" + res);
          },
          (reject) => {
            alert("再接再厉" + reject);
          }
        );
      });
    </script>
  </body>
</html>
